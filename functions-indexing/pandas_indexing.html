

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>The index &#8212; Coding for Data - 2020 edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/mystnb.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://matthew-brett.github.io/cfd2020/functions-indexing/pandas_indexing.html" />
    <link rel="shortcut icon" href="../_static/dsfe_favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">


<!-- Opengraph tags -->
<meta property="og:url"         content="https://matthew-brett.github.io/cfd2020/functions-indexing/pandas_indexing.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="The index" />
<meta property="og:description" content="The index  We return to our first data frame, containing statistics on development and gender from the World Bank.  This is the [gender_stats.csv]({{ site.baseu" />
<meta property="og:image"       content="https://matthew-brett.github.io/cfd2020/_static/dsfe_logo.png" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/dsfe_logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Coding for Data - 2020 edition</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <p class="caption">
 <span class="caption-text">
  Coding for data
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/what-is-data-science.html">
   What is data science?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/why-data-science.html">
   Why Data Science?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/computational-tools.html">
   Computational Tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/statistical-techniques.html">
   Statistical Techniques
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  On code
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/to_code.html">
   An ode to code
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/sampling_problem.html">
   A sampling problem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/three_girls.html">
   A simpler problem
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/functions-indexing/pandas_indexing.Rmd"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.Rmd</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/matthew-brett/cfd2020"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/matthew-brett/cfd2020/issues/new?title=Issue%20on%20page%20%2Ffunctions-indexing/pandas_indexing.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/matthew-brett/cfd2020/edit/master/functions-indexing/pandas_indexing.Rmd"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/matthew-brett/cfd2020/master?urlpath=tree/functions-indexing/pandas_indexing.Rmd"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            
        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <p>Way back in the [introduction to data frames]({{ site.baseurl
}}/chapters/03/data_frame_intro), we covered indexing into data frames with
<em>Boolean vectors</em>, such as Pandas Series or Numpy arrays, and indexing into data frames with column names.</p>
<p>This page covers more sophisticated indexing in Pandas.</p>
<p>To understand this indexing, we first need to cover the <em>index</em> of data frames
and Series.</p>
<p>We start with our usual imports:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the Numpy library, rename to &quot;np&quot;</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Load the Pandas data science library, rename to &quot;pd&quot;</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-index">
<h1>The index<a class="headerlink" href="#the-index" title="Permalink to this headline">¶</a></h1>
<p>We return to our first data frame, containing statistics on development and
gender from the World Bank.</p>
<p>This is the [gender_stats.csv]({{ site.baseurl }}/data/gender_stats.csv) file.
See <a class="reference external" href="https://github.com/matthew-brett/datasets/tree/master/gender_stats">the gender stats data
page</a> for
some more detail.</p>
<p>Download that file to the same directory as this notebook, if you are running
on your own computer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the data file as a data frame.</span>
<span class="n">gender_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;gender_stats.csv&#39;</span><span class="p">)</span>

<span class="c1"># Show the first 10 rows</span>
<span class="n">gender_data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As you know, the names at the top, in <strong>bold typeface</strong>, are the names of the
columns.  We can see these names using the <code class="docutils literal notranslate"><span class="pre">columns</span></code> attribute of the data
frame:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gender_data</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
</div>
<p>These can also be called the <em>column labels</em>.</p>
<p>We have not paid attention so far to the numbers at the left of the table
display, also in bold typeface.</p>
<p>In this case, they are ascending integers, starting at 0, with value 0 for the
first row, 1 for the second row, and so on.</p>
<p>These numbers are the <em>index</em> of the data frame.  The index contains the <em>row
labels</em>.</p>
<p>We can see the row labels / index with the <code class="docutils literal notranslate"><span class="pre">index</span></code> attribute of the data frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gender_data</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
</div>
<p>This is saying we have a simple index, that is like a <code class="docutils literal notranslate"><span class="pre">np.arange</span></code>, starting at
0, and continuing in steps of 1 up to, but not including 216.</p>
<p>So far, the index looks like row numbers, with 0 for the first row, 1 for the
second row.  We will soon see that the index is more than that.</p>
<p>For example, let us look at the last 15 rows.  We can get these with the <code class="docutils literal notranslate"><span class="pre">tail</span></code>
method of the data frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">last_15</span> <span class="o">=</span> <span class="n">gender_data</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">last_15</span>
</pre></div>
</div>
</div>
</div>
<p>Here is the <code class="docutils literal notranslate"><span class="pre">index</span></code> of this new data frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">last_15</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
</div>
<p>Notice that the first row of this new data frame no longer has the label 0 - it
has label 201.  These numbers are the labels from the original data frame, from
which we selected the rows.</p>
<p>Notice too that the second row in this table is the USA, and it has the label
\202.</p>
<p>Now imagine that I sort the original data frame by Gross Domestic Product, and
select the top 15 rows.  By doing this, I select the top 15 richest countries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sort by GDP.</span>
<span class="n">df_by_gdp</span> <span class="o">=</span> <span class="n">gender_data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;gdp_us_billion&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Take the top 15 rows.</span>
<span class="n">richest_15</span> <span class="o">=</span> <span class="n">df_by_gdp</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">richest_15</span>
</pre></div>
</div>
</div>
</div>
<p>Now notice that the index values have followed their respective rows.  The row
for the USA is now first, but it has kept its original index value (row label)
- 202.  The index value <em>identifies</em> the row.</p>
<p>Here is the index for this small table:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">richest_15</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
</div>
<p>Now let us say that I wanted to get the eleventh row of this table.</p>
<p>I would be tempted to do something like <code class="docutils literal notranslate"><span class="pre">richest_15[10]</span></code> - but then - what
would Pandas give me?   Does <code class="docutils literal notranslate"><span class="pre">10</span></code> mean the row label for “Australia”?  Or does
it mean the eleventh row of the table, as it would for an array, and therefore
the row for “Canada”?  That is, will the indexing using the <em>labels</em> (index
values)?  Or will it use the positions (as for indexing in Numpy arrays)?</p>
<p>The answer is, it is ambiguous, and when things are ambiguous, Pandas has to
guess.   That’s a bad idea, because then we have to guess what Pandas has
guessed, and it is starting to get really confusing.</p>
<p>For that reason, we careful Pandas users do not index rows with code like
<code class="docutils literal notranslate"><span class="pre">richest_15[10]</span></code>.  When we are not using Booleans to select rows, we always use
one of the two indexing attributes that Pandas provides.  Each does a different
type of indexing.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">loc</span></code> (label locate) attribute indexes using the <em>labels</em> (row index).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">iloc</span></code> (position locate) attribute indexes using the positions.</p></li>
</ul>
<p>Here they are in action:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the row with label 10</span>
<span class="n">richest_15</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the row at position / offset 10</span>
<span class="n">richest_15</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>In more details, what is happening in the first cell above is that
<code class="docutils literal notranslate"><span class="pre">richest_15.loc</span></code> gives us a special value (AKA <em>object</em>) that:</p>
<ul class="simple">
<li><p>knows about the <code class="docutils literal notranslate"><span class="pre">richest_15</span></code> data frame;</p></li>
<li><p>will give us rows and columns, if we use <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">something</span> <span class="pre">]</span></code> on it.</p></li>
</ul>
<p>So, read <code class="docutils literal notranslate"><span class="pre">richest_15.loc[10]</span></code> as:</p>
<ul class="simple">
<li><p>Get the <code class="docutils literal notranslate"><span class="pre">richest_15</span></code> value (the data frame);</p></li>
<li><p>Get the <code class="docutils literal notranslate"><span class="pre">loc</span></code> attribute of this data frame. This evaluates to a special
object (value) that can give us rows and columns from the data frame, by
looking at labels;</p></li>
<li><p>Use this object to fetch the row labeled 10, by using indexing (<code class="docutils literal notranslate"><span class="pre">[10]</span></code>)</p></li>
</ul>
<p>Likewise, read <code class="docutils literal notranslate"><span class="pre">richest_15.iloc[10]</span></code> as:</p>
<ul class="simple">
<li><p>Get the <code class="docutils literal notranslate"><span class="pre">richest_15</span></code> value (the data frame);</p></li>
<li><p>Get the <code class="docutils literal notranslate"><span class="pre">iloc</span></code> attribute of this data frame. This evaluates to a special
object (value) that can give us rows and columns from the data frame, by
looking at positions (offsets);</p></li>
<li><p>Use this object to fetch the row at offset 10, by using indexing (<code class="docutils literal notranslate"><span class="pre">[10]</span></code>).</p></li>
</ul>
<p>When you select rows and columns from a data frame, consider carefully what you
want.</p>
<p>Do you want to select rows and columns by <em>label</em> (by <em>index</em>, in the rows).
Then you want <code class="docutils literal notranslate"><span class="pre">.loc</span></code>.</p>
<p>Do you want to select rows and columns by <em>position</em> (offset).  Then you want
<code class="docutils literal notranslate"><span class="pre">.iloc</span></code>.</p>
</div>
<div class="section" id="loc-and-iloc-indexing-work-on-columns-too">
<h1>Loc and iloc indexing work on columns too<a class="headerlink" href="#loc-and-iloc-indexing-work-on-columns-too" title="Permalink to this headline">¶</a></h1>
<p>Consider this.  We use <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and the label for the <em>row</em>, followed by the
label for the <em>column</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">richest_15</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;gdp_us_billion&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>This selects the row <em>labeled</em> 10 (the USA row) and returns the value from the
<code class="docutils literal notranslate"><span class="pre">gdp_us_billion</span></code> column.</p>
<p>Conversely, <code class="docutils literal notranslate"><span class="pre">iloc</span></code> only understands positions, and so, integers.  It does not
understand or use labels:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># We can&#39;t specify columns by label, using iloc.</span>
<span class="n">richest_15</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;gdp_us_billion&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Notice the somewhat informative error right at the bottom of the error message.</p>
<p><code class="docutils literal notranslate"><span class="pre">iloc</span></code> can get columns by their position.  For example, <code class="docutils literal notranslate"><span class="pre">fertility_rate</span></code> is the
third column, and so we can get the fertility rate by asking <code class="docutils literal notranslate"><span class="pre">iloc</span></code> for the
eleventh row, third column, like so:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">richest_15</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>This is the value from the row at offset 10 and the column at offset 2.</p>
</div>
<div class="section" id="series-have-an-index-too">
<h1>Series have an index too<a class="headerlink" href="#series-have-an-index-too" title="Permalink to this headline">¶</a></h1>
<p>Data frames have columns (and column labels), and rows (with row labels — the
index).</p>
<p>Series also have element labels — they also have an index.</p>
<p>Consider this column, of the fertility rates of the richest countries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the fert_rate column from the data frame</span>
<span class="n">rich_ferts</span> <span class="o">=</span> <span class="n">richest_15</span><span class="p">[</span><span class="s1">&#39;fert_rate&#39;</span><span class="p">]</span>
<span class="n">rich_ferts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>As y’all know, this is a Series:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">rich_ferts</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You probably also spotted the numbers to the left of the values.  Yes, the row
labels have come across from the data frame into the Series.  We can see that
the first element has row label 202, and we remember that this is the row label
(index value) for the USA.</p>
<p>As for the data frames, here is the index for the series:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rich_ferts</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
</div>
<p>Like data frames, we can index by label, with <code class="docutils literal notranslate"><span class="pre">loc</span></code>, and by position, with
<code class="docutils literal notranslate"><span class="pre">iloc</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The value for row labeled 10 - Australia.</span>
<span class="n">rich_ferts</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The value for the row at position 10 - Canada</span>
<span class="n">rich_ferts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="rows-from-data-frames-are-series">
<h1>Rows from data frames are Series<a class="headerlink" href="#rows-from-data-frames-are-series" title="Permalink to this headline">¶</a></h1>
<p>Here we select the row at position 0 (the first row):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">first_row</span> <span class="o">=</span> <span class="n">richest_15</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">first_row</span>
</pre></div>
</div>
</div>
</div>
<p>This is a Series:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">first_row</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Notice that the Series has 9 elements, one for each column in the data frame.</p>
<p>As you remember, we can see the number of rows and columns in a data frame
with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">richest_15</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
</div>
<p>Remember, the columns have names, which we can also call <em>labels</em>.</p>
<p>When we select a row out of a data frame, we have one element per column, and
the labels for the columns now become the labels for the rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">first_row</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
</div>
<p>As for any other Series, we can get elements by label, with <code class="docutils literal notranslate"><span class="pre">loc</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">first_row</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;fert_rate&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>We can also get elements by position (offset), with <code class="docutils literal notranslate"><span class="pre">iloc</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">first_row</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="you-can-index-without-loc-and-iloc-but-please-don-t-except">
<h1>You can index without loc and iloc, but please don’t, except …<a class="headerlink" href="#you-can-index-without-loc-and-iloc-but-please-don-t-except" title="Permalink to this headline">¶</a></h1>
<p>In the <span class="xref myst">data frame introduction</span>, you saw that we can
index into data frame directly, using <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">something</span> <span class="pre">]</span></code> after the data frame
value, without using <code class="docutils literal notranslate"><span class="pre">loc</span></code> or <code class="docutils literal notranslate"><span class="pre">iloc</span></code>.  Call this <em>direct indexing</em>.  This is
a very reasonable thing to do if:</p>
<ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">something</span></code> is a Boolean sequence.  This is not ambiguous.</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">something</span></code> is a column name.  This isn’t ambiguous either.</p></li>
</ul>
<p>We used both types of direct indexing in the data frame introduction page.</p>
<p>For example, both of these are entirely reasonable uses of direct indexing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct Boolean indexing:</span>
<span class="c1"># Select rows where &#39;health_exp_per_cap&#39; is greater than 3000 dollars.</span>
<span class="n">is_big_spender</span> <span class="o">=</span> <span class="n">richest_15</span><span class="p">[</span><span class="s1">&#39;health_exp_per_cap&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">3000</span>  <span class="c1"># Boolean Series</span>
<span class="n">big_health_spenders</span> <span class="o">=</span> <span class="n">richest_15</span><span class="p">[</span><span class="n">is_big_spender</span><span class="p">]</span>
<span class="n">big_health_spenders</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct indexing with column label:</span>
<span class="c1"># Select the &#39;country_code&#39; column.</span>
<span class="n">country_code</span> <span class="o">=</span> <span class="n">richest_15</span><span class="p">[</span><span class="s1">&#39;country_code&#39;</span><span class="p">]</span>
<span class="n">country_code</span>
</pre></div>
</div>
</div>
</div>
<p>Those uses of direct indexing are entirely sensible.  Other uses of direct indexing are not sensible, and we strongly encourage you not to use them.</p>
<p>For example, Pandas will also allow you to this, with the Series we just made:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Nooooooo !</span>
<span class="n">country_code</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Please don’t do that.  This is ambiguous.  Did you really mean the country with
label 10?  Or did you mean the country at position 10?   Pandas will guess for
you.  Don’t let it.  If you are not selecting rows / elements with Booleans,
always do this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># By label</span>
<span class="n">country_code</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>or this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># By position</span>
<span class="n">country_code</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="you-can-use-boolean-indexing-with-loc">
<h1>You can use Boolean indexing with loc<a class="headerlink" href="#you-can-use-boolean-indexing-with-loc" title="Permalink to this headline">¶</a></h1>
<p>It is often convenient to use direct indexing with Booleans, as we have just seen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a Boolean series with True for big spender rows, False otherwise.</span>
<span class="n">is_big_spender</span> <span class="o">=</span> <span class="n">richest_15</span><span class="p">[</span><span class="s1">&#39;health_exp_per_cap&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">3000</span>
<span class="n">is_big_spender</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct Boolean indexing:</span>
<span class="c1"># Select rows where &#39;health_exp_per_cap&#39; is greater than 3000 dollars.</span>
<span class="n">big_health_spenders</span> <span class="o">=</span> <span class="n">richest_15</span><span class="p">[</span><span class="n">is_big_spender</span><span class="p">]</span>
<span class="n">big_health_spenders</span>
</pre></div>
</div>
</div>
</div>
<p>We can also use Booleans with <code class="docutils literal notranslate"><span class="pre">loc</span></code> indexing.  This allows us to do things such
as selecting rows with Booleans, and columns with labels, in one shot, like
this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Boolean indexing for rows, with &quot;loc&quot;</span>
<span class="c1"># Get &quot;country_name&quot; column values for big health spenders:</span>
<span class="n">big_spender_names</span> <span class="o">=</span> <span class="n">richest_15</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">is_big_spender</span><span class="p">,</span> <span class="s1">&#39;country_name&#39;</span><span class="p">]</span>
<span class="n">big_spender_names</span>
</pre></div>
</div>
</div>
</div>
<p>In fact you can use some Boolean sequences with <code class="docutils literal notranslate"><span class="pre">iloc</span></code> as well, but that needs
<a class="reference internal" href="booleans_and_labels.html"><span class="doc std std-doc">a little more explanation</span></a>.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "matthew-brett/cfd2020",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./functions-indexing"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Matthew Brett, Ani Adhikari, John Denero, David Wagner<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>