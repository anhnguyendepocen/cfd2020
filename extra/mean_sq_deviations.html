

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>The mean and squared differences &#8212; Coding for Data - 2020 edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/mystnb.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://matthew-brett.github.io/cfd2020/extra/mean_sq_deviations.html" />
    <link rel="shortcut icon" href="../_static/dsfe_favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">


<!-- Opengraph tags -->
<meta property="og:url"         content="https://matthew-brett.github.io/cfd2020/extra/mean_sq_deviations.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="The mean and squared differences" />
<meta property="og:description" content="The mean and squared differences  This page is assumes a lot more maths than the standard bit of the course.  In particular, it assumes that you know the basics" />
<meta property="og:image"       content="https://matthew-brett.github.io/cfd2020/_static/dsfe_logo.png" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/dsfe_logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Coding for Data - 2020 edition</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <p class="caption">
 <span class="caption-text">
  Coding for data
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/what-is-data-science.html">
   What is data science?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/why-data-science.html">
   Why Data Science?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/computational-tools.html">
   Computational Tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/statistical-techniques.html">
   Statistical Techniques
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/surviving_computers.html">
   Have a piece of paper and a pen next to you
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/surviving_computers.html#work-in-pairs">
   Work in pairs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/surviving_computers.html#references">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/the_software.html">
   The parts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/using_jupyter.html">
   Using Jupyter notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/more_on_jupyter.html">
   The prompts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/more_on_jupyter.html#interrupting-restarting">
   Interrupting, restarting
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  On code
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/to_code.html">
   An ode to code
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/sampling_problem.html">
   A sampling problem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/three_girls.html">
   A simpler problem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/variables_intro.html">
   An interlude - thinking like the computer.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/variables_intro.html#variables">
   Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/variables_intro.html#id1">
   Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/variables_intro.html#end-note">
   End note
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Expressions.html">
   Walking a mile in Pythonâ€™s shoes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Expressions.html#common-operators">
   Common Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Expressions.html#operator-precedence">
   Operator precedence
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Expressions.html#example">
   Example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Calls.html">
   Example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/sub_expressions.html">
   Sub-expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Names.html">
   Reassigning variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Names.html#rules-for-variable-names">
   Rules for variable names
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/extra/mean_sq_deviations.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/matthew-brett/cfd2020"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/matthew-brett/cfd2020/issues/new?title=Issue%20on%20page%20%2Fextra/mean_sq_deviations.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/matthew-brett/cfd2020/edit/master/extra/mean_sq_deviations.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            
        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="the-mean-and-squared-differences">
<h1>The mean and squared differences<a class="headerlink" href="#the-mean-and-squared-differences" title="Permalink to this headline">Â¶</a></h1>
<p>This page is assumes a lot more maths than the standard bit of the course.  In
particular, it assumes that you know the basics of finding the
<a class="reference external" href="https://en.wikipedia.org/wiki/Derivative">derivative</a> of a function.</p>
<p>In practice this means that, if you are in the US, you will need to have taken
pre-calculus and calculus at school or university, and if youâ€™re in the UK,
that means you will need A-level maths.  That said, the algebra and calculus
you need here are basic enough that, if you are motivated, you could teach
yourself what you need from web resources or an introductory textbook.</p>
<p>Nothing in the rest of the course assumes you can follow the mathematics in this page.  The page is just for those of you who are interested, and do know that part of mathematics.</p>
<p>In <span class="xref myst">the meaning of the mean</span> we were studying prediction
errors.</p>
<p>We imagined using the mean of a set of value as a predictor for those values.  Then we looked at how far off we would be, on average, if we use the mean to predict each value.</p>
<p>Letâ€™s say we have a sequence of <span class="math notranslate nohighlight">\(n\)</span> values.  For example, <span class="math notranslate nohighlight">\(n\)</span> could be 8.  Call
the first value <span class="math notranslate nohighlight">\(x_1\)</span>, the second <span class="math notranslate nohighlight">\(x_2\)</span> and so on, up to <span class="math notranslate nohighlight">\(x_n\)</span>.  For example,
if <span class="math notranslate nohighlight">\(n = 8\)</span>, then the sequence of eight values would be <span class="math notranslate nohighlight">\({x_1, x_2, x_3, x_4,
x_5, x_6, x_7, x_8}\)</span>.  In general I can write the sequence of <span class="math notranslate nohighlight">\(n\)</span> values as
<span class="math notranslate nohighlight">\({x_1, x_2, ..., x_n}\)</span>.</p>
<p>We often want to add up all the values, for example, when we calculate the
mean.  I could write <span class="math notranslate nohighlight">\(x_1 + x_2 + ... + x_n\)</span>, but that is rather long and
clumsy.  The mathematical shorthand for this is <span class="math notranslate nohighlight">\(\sum x_i\)</span>, meaning add up all
the values in the sequence <span class="math notranslate nohighlight">\({x_1, x_2, ..., x_n}\)</span>.</p>
<p>We can write the mean using this notation.  Use the symbol <span class="math notranslate nohighlight">\(\bar{x}\)</span> to refer
to the mean of the sequence <span class="math notranslate nohighlight">\({x_1, x_2, ... x_n}\)</span>. Then the definition of the mean is:</p>
<div class="math notranslate nohighlight">
\[
\bar{x} \triangleq \frac{1}{n}\sum x_i
\]</div>
<p>The <span class="math notranslate nohighlight">\(\triangleq\)</span> symbol means <em>is defined as</em>.</p>
<p>Now we have the notation, we can return to our problem.</p>
<p>We are to going to take some value <span class="math notranslate nohighlight">\(c\)</span>, and subtract it from all the values in
<span class="math notranslate nohighlight">\({x_1, x_2, ... x_n}\)</span>.  This will give us a new sequence of <em>deviations</em> or
<em>errors</em> <span class="math notranslate nohighlight">\({x_1 - c, x_1 - c, ..., x_n - c}\)</span>.  Then we will square the
errors, to get <span class="math notranslate nohighlight">\({(x_1 - c)^2, (x_2 - c)^2, ... (x_n - c)^2}\)</span>, and finally
we will add up all these squared errors: <span class="math notranslate nohighlight">\(\sum (x_i - c)^2\)</span>.  Call this,
the Sum of Squared Errors or <span class="math notranslate nohighlight">\(SSE\)</span> for a particular value <span class="math notranslate nohighlight">\(c\)</span>.  So:</p>
<div class="math notranslate nohighlight">
\[
\begin{equation}
SSE_c \triangleq \sum (x_i - c)^2 \tag{SSE_c}\label{eq:sse_c}
\end{equation}
\]</div>
<p>This is the general formula for the specific plot we saw at the end of <span class="xref myst">the
meaning of the mean page</span>, where the value for <span class="math notranslate nohighlight">\(c\)</span> is on
the horizontal axis, and the value for <span class="math notranslate nohighlight">\(SSE_c\)</span> is on the vertical axis.</p>
<p>We want to find the value of <span class="math notranslate nohighlight">\(c\)</span> that gives the smallest value for <span class="math notranslate nohighlight">\(SSE_c\)</span>.</p>
<p>The plot turned out to be U-shaped; we want to find the horizontal axis
location (<span class="math notranslate nohighlight">\(c\)</span> value) corresponding to the bottom of the U (minimum of the
corresponding <span class="math notranslate nohighlight">\(SSE_c\)</span> values).</p>
<p>We can find this location by transforming the formula in \eqref{eq:sse_c} above
into a formula for the <em>gradient</em> of the line that \eqref{eq:sse_c} represents.
This is <em>taking the derivative</em>.  When the <em>derivative</em> of equation
\eqref{eq:sse_c} is equal to zero, it means the <em>gradient</em> of
\eqref{eq:sse_c} is 0, and this is true when we are at a peak or a trough of
\eqref{eq:sse_c}.  We want the trough.</p>
<p>Letâ€™s start by expanding out equation \eqref{eq:sse_c}, and using the <a class="reference external" href="http://matthew-brett.github.io/teaching/some_sums.html">laws of sums</a> to simplify the result:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
SSE_c \triangleq \sum (x_i - c)^2 \implies \\
= \sum (x_i^2 - 2 x_i c + c^2) \implies \\
= \sum x_i^2 - 2 c \sum x_i + n c^2
\end{split}\]</div>
<p>Now differentiate with respect to <span class="math notranslate nohighlight">\(c\)</span>:</p>
<div class="math notranslate nohighlight">
\[
\begin{equation}
\frac{\partial SSE_c}{\partial c} = -2 \sum x_i + 2 n c \tag{dSSE_c}\label{eq:dsse_c}
\end{equation}
\]</div>
<p>When equation \eqref{eq:dsse_c} has value zero, we can be at a peak (the
gradient is zero, but itâ€™s about to become negative) or a trough (the gradient
is zero, but itâ€™s about to become positive).</p>
<p>Find the zero(s) for equation \eqref{eq:dsse_c}:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
2 \sum x_i = 2 n c \implies \\
\frac{1}{n} \sum x_i = c
\end{split}\]</div>
<p>Equation \eqref{eq:dsse_c} only has one zero, and it is when <span class="math notranslate nohighlight">\(c\)</span> is equal to
the mean.</p>
<p>We so far donâ€™t know if this single zero is at a peak or a trough, but we can
differentiate equation \eqref{eq:dsse_c} again, to see the slope of the slope.
If this is positive at <span class="math notranslate nohighlight">\(c = \frac{1}{n} \sum x_i\)</span>, than the slope is changing
to be positive, and we would be at a trough, if it is negative, the slope is
changing to be negative, and we would be at a peak.  Hereâ€™s the derivative of
equation \eqref{eq:dsse_c}, also called the <a class="reference external" href="https://en.wikipedia.org/wiki/Second_derivative">second
derivative</a>:</p>
<div class="math notranslate nohighlight">
\[
\frac{\partial ^2SSE_c}{\partial c^2} = 2 n
\]</div>
<p><span class="math notranslate nohighlight">\(n\)</span> is always positive; this means that the second derivative is always
positive, and therefore, it is also positive at our zero point <span class="math notranslate nohighlight">\(c = \frac{1}{n}
\sum x_i\)</span>.  So, equation \eqref{eq:sse_c} only has a one trough, at <span class="math notranslate nohighlight">\(c =
\frac{1}{n} \sum x_i\)</span>, and no peaks.</p>
<p>Therefore the mean <span class="math notranslate nohighlight">\(\frac{1}{n}\sum x_i\)</span> is the value <span class="math notranslate nohighlight">\(c\)</span> that minimizes the
sum of squared errors, also called the sum of squared deviations, also called
the sum of squared prediction errors.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "matthew-brett/cfd2020",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./extra"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Matthew Brett, Ani Adhikari, John Denero, David Wagner<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>